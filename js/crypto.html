<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
				<html lang="en"> 
				<head> 
				<meta http-equiv="content-type" content="text/html; charset=utf-8">

				<script type="text/javascript">
				var counter = window.crypto.getRandomValues(new Uint8Array(16));

function buf2hex(buffer) { // buffer is an ArrayBuffer
				return Array.prototype.map.call(new Uint8Array(buffer), x => ('00' + x.toString(16)).slice(-2)).join('');
}

function sha2() {
				var mssg = "The quick brown fox jumps over the lazy dog";
				var arr = mssg.split("");
				console.log(arr);

				window.crypto.subtle.digest({
								name: "SHA-256",
				},
								new Uint8Array(arr) //The data you want to hash as an ArrayBuffer
				).then(function(hash){
								console.log(new Uint8Array(hash));
				}).catch(function(err){
								console.error(err);
				});
}

function encode() {
				var mssg = "The quick brown fox jumps over the lazy dog";
				let enc = new TextEncoder();
				return enc.encode(mssg);
}

function encode() {
				var mssg = "The quick brown fox jumps over the lazy dog";
				let enc = new TextEncoder();
				return enc.encode(mssg);
}

function aesCtr(){
				k_promise = window.crypto.subtle.generateKey(
								{
												name: "AES-CTR",
												length: 128
								},
								extractable: true,
								false,
								["encrypt", "decrypt"]
				);
				k_promise.then(function(key) {
								key_object = key;
								aesEncrypt();
				});
				k_promise.catch = function(err) {
								console.log(err.message);
				}

}

function aesEncrypt() {
				let ptxt = encode();


				enc_promise = window.crypto.subtle.encrypt(
								{
												name: "AES-CTR",
												counter,
												length: 64
								},
								key_object,
								ptxt
				);
				enc_promise.then(
								function(result) {
												ciphertext = new Uint8Array(result);
												console.log(counter);
												console.log(key_object.valueOf());
												console.log(buf2hex(ciphertext));
								}, function(err) {
												console.log(err.message);
								}
				);
}
window.onload = aesCtr;
</script>

				<title>Crypto!</title>
				</head>
				<body> 
				<p>
				This does cool stuff
				</p>
				</body>
				</html>

