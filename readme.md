# <img src="images/brypt-logo.svg" alt="Brypt Logo" width="32px" height="32px"> Brypt Node

## Purpose
Brypt is an exploration into creating a secure distributed network and application protocol that is agnostic of communication technology. The prevalence of devices deployed in Internet of Things (IoT) networks has exploded in the past decade, entering into many different industries and applications. The exploitation of an IoT network's unsecured communications can have wide-reaching consequences for the privacy of environmental and user data. This project will implement a solution for these IoT use cases by developing a secured network organized into a pseudo-mesh topology while utilizing lightweight cryptographic primitives to maintain privacy, efficiency, and graceful degradation. The metrics produced by the Brypt ecosystem will be used to investigate the computational and power impacts of different cryptographic systems.

## Getting Started
### Prerequisites
#### C++ Standard Version: C++17
#### Build Tools:
- GCC/G++ 9.3.0
- GNU Make 4.1
#### Library Dependencies
- Boost 1.72
- libzmq 4.3.2
- cppzmq 4.6.0
- metajson 0.2
- Google Test 1.10
  
### Build Process
The build process is setup through the use of Make. The codebase may be built for release with the following command:
```bash
make
```
#### Makefile Options
| Option | Value | Default | Required | Description |
|-----------|-----------|-----------|-----------|-----------|
| clean | N/A | N/A | No | Clean any artificats from a prior build. |
| rebuild | N/A | N/A | No | Clean any artificats from a prior build before building the software. |
| mode | String | release | No | Sets the type of symbols generated by the build process. With a value of "release" the binaries are built as it would be for production. With a value of "debug" the binaries are built with debug symbols and optimizations disabled. |

## Configuration
A Brypt node makes use of a configuration file to describe the settings to be used when operating. If no configuration file is found, a utility will be run to generate a configuration file from user input. On Linux, the default location is based on supported environment variables and may be one of the following (in order of precedence): *\$XDG_CONFIG_HOME/brypt/config.json*, *\$HOME/brypt/config.json*, or */brypt/config.json*.
#### Configuration Options
| Key | Type | Supported Options | Required | Description |
|-----------|-----------|-----------|-----------|-----------|
| version | String | N/A | Yes | Indicates the version of the brypt software. |
| details | Object | N/A | No | Contains human readible details a user may want store about the node. |
| endpoints | Array | N/A | Yes | Describes the technologies to be used by the node and their respective configurations. |
| security | Object | N/A | Yes | Describes security options to be used by the node. |
##### Details Configuration Options
| Key | Type | Supported Options | Required | Description |
|-----------|-----------|-----------|-----------|-----------|
| name | String | N/A | No | Indicates a name for the node. |
| description | String | N/A | No | Indicates a description for the node. |
| location | String | N/A | No | Indicates a location for the node. Feature not currently implemented, but may support coordinates or other location discovery systems. |
##### Endpoint Configuration Options
| Key | Type | Supported Options | Required | Description |
|-----------|-----------|-----------|-----------|-----------|
| technology | String | Direct, StreamBridge, TCP | Yes | Indicates a communication technology that will be used. |
| interface | String | N/A | Yes | Indicates the network interface that will be used for the technology. |
| binding | String | N/A | Yes | Indicates the binding (e.g. address:port for IP based technologies) that will be used for the serving endpoint. |
| bootstrap | String | N/A | No | Indicates a default bootstrap entry that may be used when no other peers are cached. |
##### Security Configuration Options
| Key | Type | Supported Options | Required | Description |
|-----------|-----------|-----------|-----------|-----------|
| standard | String | N/A | Yes | Indicates an encryption standard to be used during messaging. Support not currently implemented. |
| token | String | N/A | Yes | Indicates a token for logically seperating Brypt networks. Support not currently implemented. |
| authority | String | N/A | No | Indicates a URL for the governing body of the network. |
### Schema
```json
{
    "version": "String",
    "details": {
        "name": "String",
        "description": "String",
        "location": "String"
    },
    "endpoints": [
        {
            "technology": "String",
            "interface": "String",
            "binding": "String",
            "bootstrap": "String"
        }
    ],
    "security": {
        "standard": "String",
        "token": "String",
        "authority": "String"
    }
}
```

## Usage
### Running the Node
```bash
./bin/BryptNode
```
#### Command Line Arguments
| Flag | Value | Default | Required | Description |
|-----------|-----------|-----------|-----------|-----------|
| --config | String | config.json | No | A filename or filepath for an alternative configuration file to be used. |
| --peers | String | peers.json | No | A filename or filepath for an alternative peers cache file to be used. |
### Running the Tests
```bash
make rebuild mode=debug -C Tests/UT_Endpoints
bin/UT_Endpoints
```

## Contributing
Currently this project is in early development, however, contributors are welcome. If you have any ideas, feel free to open an issue to discuss.
